CREATE TABLE API_DETAILS (
  API_ID BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE,
  API_NAME VARCHAR2(100) NOT NULL,
  CREATED_BY VARCHAR2(6) NOT NULL,
  CREATED_ON TIMESTAMP WITH TIME ZONE,
  LAST_MODIFIED_BY VARCHAR2(6) NOT NULL,
  LAST_MODIFIED_ON TIMESTAMP WITH TIME ZONE,
  PRIMARY KEY (API_ID),
  UNIQUE (API_NAME)
);


CREATE TABLE RESOURCE_DETAILS (
  RESOURCE_ID BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE,
  API_ID BIGINT NOT NULL,
  RESOURCE_NAME VARCHAR2(1000) NOT NULL,
  RESOURCE_METHOD VARCHAR2(6) NOT NULL,
  CREATED_BY VARCHAR2(6) NOT NULL,
  CREATED_ON TIMESTAMP WITH TIME ZONE,
  LAST_MODIFIED_BY VARCHAR2(6) NOT NULL,
  LAST_MODIFIED_ON TIMESTAMP WITH TIME ZONE,
  PRIMARY KEY (RESOURCE_ID),
  FOREIGN KEY (API_ID) REFERENCES API_DETAILS(API_ID),
  UNIQUE (RESOURCE_NAME, RESOURCE_METHOD)
);


CREATE TABLE STUBS_DETAILS (
  STUB_ID BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE,
  RESOURCE_ID BIGINT NOT NULL,
  PRIORITY INT NOT NULL,
  STUB_RESOURCE_URI VARCHAR2(1000) NOT NULL,
  REQUEST_HEADERS VARCHAR2(1000),
  REQUEST_BODY VARCHAR2(1000),
  REQUEST_QUERY_PARAMS VARCHAR2(255),
  RESPONSE_DELAY_MS INT,
  RESPONSE_URI VARCHAR2(1000),
  RESPONSE_HEADER VARCHAR2(1000),
  RESPONSE_BODY VARCHAR2(1000),
  RESPONSE_ST_CD INT NOT NULL,
  CREATED_BY VARCHAR2(6) NOT NULL,
  CREATED_ON TIMESTAMP WITH TIME ZONE,
  LAST_MODIFIED_BY VARCHAR2(6) NOT NULL,
  LAST_MODIFIED_ON TIMESTAMP WITH TIME ZONE,
  PRIMARY KEY (STUB_ID),
  FOREIGN KEY (RESOURCE_ID) REFERENCES RESOURCE_DETAILS(RESOURCE_ID),
  UNIQUE (RESOURCE_ID, PRIORITY)
);